<div valorLaunchpadRow class="mb-2 mb-xl-3">
  <div valorLaunchpadCol [span]="'auto'">
    <h3 data-qa="titleSaaSPage">SaaS</h3>
  </div>

  <div valorLaunchpadCol [span]="'auto'" class="ms-auto">
    <div class="dropdown me-2 d-inline-block">
      <valor-launchpad-dropdown>
        <button
          valor-launchpad-button
          dropdown-nav
          theme="light"
          class="bg-white shadow-sm dropdown-toggle"
        >
          <i class="align-middle mt-n1 far fa-fw fa-calendar"></i> Today
        </button>
        <valor-launchpad-dropdown-actions-menu
          [actions]="actions"
        ></valor-launchpad-dropdown-actions-menu>
      </valor-launchpad-dropdown>
    </div>
    <button valor-launchpad-button>
      <i class="align-middle fas fa-fw fa-filter">&nbsp;</i>
    </button>
    <button valor-launchpad-button>
      <i class="align-middle fas fa-fw fa-sync">&nbsp;</i>
    </button>
  </div>
</div>
<div valorLaunchpadRow *ngIf="mainInfo$ | async as mainInfo">
  <valor-launchpad-saas-info-card
    valorLaunchpadCol
    [md]="6"
    [xxl]="3"
    [icon]="'fas fa-fw fa-shopping-bag'"
    [mainTitle]="'Income'"
    [value]="mainInfo.income.amount | currency"
    [change]="mainInfo.income.change"
  >
  </valor-launchpad-saas-info-card>
  <valor-launchpad-saas-info-card
    valorLaunchpadCol
    [md]="6"
    [xxl]="3"
    [icon]="'fas fa-fw fa-shopping-cart'"
    [mainTitle]="'Orders'"
    [value]="mainInfo.orders.amount | number"
    [change]="mainInfo.orders.change"
  >
  </valor-launchpad-saas-info-card>
  <valor-launchpad-saas-info-card
    valorLaunchpadCol
    [md]="6"
    [xxl]="3"
    [icon]="'fas fa-chart-line'"
    [mainTitle]="'Activity'"
    [value]="mainInfo.activity.amount | number"
    [change]="mainInfo.activity.change"
  >
  </valor-launchpad-saas-info-card>
  <div valorLaunchpadCol [md]="6" [xxl]="3">
    <valor-launchpad-card class="illustration">
      <valor-launchpad-card-content class="p-0">
        <div valorLaunchpadRow class="g-0 w-100">
          <div valorLaunchpadCol [span]="6">
            <div class="illustration-text p-3 m-1">
              <h4 class="illustration-text">
                Welcome Back, {{ userFirstName$ | async }}!
              </h4>
              <p class="mb-0">Admin Dashboard</p>
            </div>
          </div>
          <div valorLaunchpadCol [span]="6" class="align-self-end text-end">
            <img
              src="assets/img/illustrations/social.png"
              alt="Social"
              class="img-fluid illustration-img"
            />
          </div>
        </div>
      </valor-launchpad-card-content>
    </valor-launchpad-card>
  </div>
</div>

<div valorLaunchpadRow>
  <div valorLaunchpadCol [span]="12" [lg]="4">
    <valor-launchpad-card>
      <valor-launchpad-card-header>
        <div class="card-actions float-end">
          <valor-launchpad-dropdown>
            <span dropdown-nav><i class="fas fa-fw fa-ellipsis-h"></i></span>
            <valor-launchpad-dropdown-actions-menu
              [actions]="actions"
            ></valor-launchpad-dropdown-actions-menu>
          </valor-launchpad-dropdown>
        </div>
        <h5 class="card-title mb-0">Sales by State</h5>
      </valor-launchpad-card-header>
      <valor-launchpad-card-content>
        <div id="sales-by-state" style="height: 300px"></div>
      </valor-launchpad-card-content>
    </valor-launchpad-card>
  </div>
  <div valorLaunchpadCol [span]="12" [md]="7" [lg]="4" [xxl]="6">
    <valor-launchpad-card>
      <valor-launchpad-card-header>
        <div class="card-actions float-end">
          <valor-launchpad-dropdown>
            <span dropdown-nav><i class="fas fa-fw fa-ellipsis-h"></i></span>
            <valor-launchpad-dropdown-actions-menu
              [actions]="actions"
            ></valor-launchpad-dropdown-actions-menu>
          </valor-launchpad-dropdown>
        </div>
        <h5 class="card-title mb-0">Sales / Revenue</h5>
      </valor-launchpad-card-header>
      <valor-launchpad-card-content>
        <div class="align-self-center chart">
          <ngx-charts-bar-vertical-stacked
            [scheme]="barChartConfig.colorScheme"
            [results]="salesRevenue$ | async"
            [gradient]="barChartConfig.gradient"
            [xAxis]="barChartConfig.showXAxis"
            [yAxis]="barChartConfig.showYAxis"
            [legend]="barChartConfig.showLegend"
            [showXAxisLabel]="barChartConfig.showXAxisLabel"
            [showYAxisLabel]="barChartConfig.showYAxisLabel"
            [xAxisLabel]="barChartConfig.xAxisLabel"
            [yAxisLabel]="barChartConfig.yAxisLabel"
            [animations]="barChartConfig.animations"
          ></ngx-charts-bar-vertical-stacked>
        </div>
      </valor-launchpad-card-content>
    </valor-launchpad-card>
  </div>
  <div valorLaunchpadCol [span]="12" [md]="5" [lg]="4" [xxl]="2">
    <valor-launchpad-card style="height: 390px">
      <valor-launchpad-card-header>
        <div class="card-actions float-end">
          <valor-launchpad-dropdown>
            <span dropdown-nav><i class="fas fa-fw fa-ellipsis-h"></i></span>
            <valor-launchpad-dropdown-actions-menu
              [actions]="actions"
            ></valor-launchpad-dropdown-actions-menu>
          </valor-launchpad-dropdown>
        </div>
        <h5 class="card-title mb-0">Order Activity</h5>
      </valor-launchpad-card-header>
      <valor-launchpad-card-content>
        <ul class="timeline">
          <li class="timeline-item" *ngFor="let i of orderActivities$ | async">
            <strong>{{ i.type }}</strong>
            <p class="text-sm">{{ i.time }}</p>
          </li>
        </ul>
      </valor-launchpad-card-content>
    </valor-launchpad-card>
  </div>
</div>

<valor-launchpad-card>
  <valor-launchpad-card-header>
    <div class="card-actions float-end">
      <valor-launchpad-dropdown>
        <span dropdown-nav><i class="fas fa-fw fa-ellipsis-h"></i></span>
        <valor-launchpad-dropdown-actions-menu
          [actions]="actions"
        ></valor-launchpad-dropdown-actions-menu>
      </valor-launchpad-dropdown>
    </div>
    <h5 class="card-title mb-0">Top Selling Products</h5>
  </valor-launchpad-card-header>
  <valor-launchpad-card-content>
    <ngx-datatable
      #myTable
      [columnMode]="'force'"
      [columns]="columns"
      [rows]="topSellingProducts$ | async"
      [rowHeight]="46"
      [footerHeight]="50"
      [limit]="5"
    >
      <ngx-datatable-footer>
        <ng-template
          ngx-datatable-footer-template
          let-rowCount="rowCount"
          let-pageSize="pageSize"
          let-curPage="curPage"
        >
          <div class="page-count">
            Showing
            {{ curPage === 1 ? 1 : (curPage - 1) * pageSize + 1 }}
            to
            {{ pageSize * curPage > rowCount ? rowCount : pageSize * curPage }}
            of
            {{ rowCount }}
            entries
          </div>
          <datatable-pager
            [pagerLeftArrowIcon]="'datatable-valor-left'"
            [pagerRightArrowIcon]="'datatable-valor-right'"
            [page]="curPage"
            [size]="pageSize"
            [count]="rowCount"
            [hidden]="!(rowCount / pageSize > 1)"
            (change)="myTable.onFooterPage($event)"
          ></datatable-pager>
        </ng-template>
      </ngx-datatable-footer>
    </ngx-datatable>
    <ng-template #techCell let-value="value">
      <span
        class="badge bg-primary"
        [class.bg-danger]="value === 'Angular'"
        [class.bg-info]="value === 'Vue'"
        [class.bg-success]="value === 'HTML'"
        [class.bg-warning]="value === 'React'"
      >
        {{ value }}
      </span>
    </ng-template>
  </valor-launchpad-card-content>
</valor-launchpad-card>
